@using MageKnightOnline.Models
@using MageKnightOnline.Services
@inject MageKnightGameService GameService
@inject NavigationManager Navigation

<div class="game-board-container">
    <div class="game-board-header mb-4">
        <h2 class="text-2xl font-bold text-white">Game Board</h2>
        <div class="flex gap-4 text-sm text-gray-300">
            <span>Round: 1</span>
            <span>Turn: 1</span>
            <span>Phase: Preparation</span>
        </div>
    </div>
    
    <div class="game-board grid grid-cols-7 gap-1 bg-gray-800 p-4 rounded-lg">
        @for (int y = 0; y < 7; y++)
        {
            @for (int x = 0; x < 7; x++)
            {
                <div class="tile relative w-16 h-16 border border-gray-600 rounded cursor-pointer hover:border-yellow-400 transition-colors bg-gray-700"
                     @onclick="() => OnTileClick(x, y)">
                    
                    <!-- Tile Background -->
                    <div class="absolute inset-0 rounded" style="background-image: url('/images/MK_map_tiles_01-1.png'); background-size: cover; background-position: center;"></div>
                    
                    <!-- Center tile with player -->
                    @if (x == 3 && y == 3)
                    {
                        <div class="absolute inset-0 flex items-center justify-center">
                            <div class="w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center text-white text-xs font-bold">
                                1
                            </div>
                        </div>
                    }
                    
                    <!-- Site markers -->
                    @if ((x == 1 && y == 1) || (x == 5 && y == 1) || (x == 1 && y == 5) || (x == 5 && y == 5))
                    {
                        <div class="absolute inset-0 flex items-center justify-center">
                            <div class="w-8 h-8 bg-red-600 rounded-full flex items-center justify-center text-white text-xs font-bold">
                                @(x == 1 && y == 1 ? "R" : x == 5 && y == 1 ? "D" : x == 1 && y == 5 ? "K" : "M")
                            </div>
                        </div>
                    }
                    
                    <!-- Coordinates -->
                    <div class="absolute bottom-0 right-0 text-xs text-gray-400 bg-black bg-opacity-50 px-1 rounded">
                        @x,@y
                    </div>
                </div>
            }
        }
    </div>
    
    <!-- Sites Legend -->
    <div class="mt-4">
        <h3 class="text-lg font-semibold text-white mb-2">Sites</h3>
        <div class="grid grid-cols-2 md:grid-cols-5 gap-2">
            <div class="bg-gray-700 rounded p-2 text-center">
                <div class="w-8 h-8 bg-red-600 rounded-full mx-auto mb-1 flex items-center justify-center text-white text-xs font-bold">R</div>
                <div class="text-xs text-white">Ancient Ruins</div>
                <div class="text-xs text-gray-400">Hidden</div>
            </div>
            <div class="bg-gray-700 rounded p-2 text-center">
                <div class="w-8 h-8 bg-red-600 rounded-full mx-auto mb-1 flex items-center justify-center text-white text-xs font-bold">D</div>
                <div class="text-xs text-white">Dark Dungeon</div>
                <div class="text-xs text-gray-400">Hidden</div>
            </div>
            <div class="bg-gray-700 rounded p-2 text-center">
                <div class="w-8 h-8 bg-red-600 rounded-full mx-auto mb-1 flex items-center justify-center text-white text-xs font-bold">K</div>
                <div class="text-xs text-white">Orc Keep</div>
                <div class="text-xs text-gray-400">Hidden</div>
            </div>
            <div class="bg-gray-700 rounded p-2 text-center">
                <div class="w-8 h-8 bg-red-600 rounded-full mx-auto mb-1 flex items-center justify-center text-white text-xs font-bold">M</div>
                <div class="text-xs text-white">Mage Tower</div>
                <div class="text-xs text-gray-400">Hidden</div>
            </div>
            <div class="bg-gray-700 rounded p-2 text-center">
                <div class="w-8 h-8 bg-red-600 rounded-full mx-auto mb-1 flex items-center justify-center text-white text-xs font-bold">C</div>
                <div class="text-xs text-white">Capital City</div>
                <div class="text-xs text-gray-400">Hidden</div>
            </div>
        </div>
    </div>
</div>

@code {
    [Parameter] public int GameSessionId { get; set; }
    
    private void OnTileClick(int x, int y)
    {
        // Handle tile click - movement, exploration, etc.
        Console.WriteLine($"Clicked tile at ({x}, {y})");
    }
}
